{
  "hash": "599395c1fa9a50b133f76799d4ba3282",
  "result": {
    "markdown": "---\ntitle: \"30 days chart challenge - day 22\"\ndescription: \"green energy\"\nauthor: \"Marcel Ferreira\"\ndate: \"2023-04-22\"\ncategories: [R, Dataviz]\nimage: \"brazil.png\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.0     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv ggplot2   3.4.1     v tibble    3.1.8\nv lubridate 1.9.2     v tidyr     1.3.0\nv purrr     1.0.1     \n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(extrafont)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRegistering fonts with R\n```\n:::\n\n```{.r .cell-code}\nlibrary(cowplot)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'cowplot'\n\nThe following object is masked from 'package:lubridate':\n\n    stamp\n```\n:::\n\n```{.r .cell-code}\nlibrary(patchwork)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'patchwork'\n\nThe following object is masked from 'package:cowplot':\n\n    align_plots\n```\n:::\n:::\n\n\n## Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_ACR <- read_csv(\"annual-change-renewables.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 5499 Columns: 4\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (2): Entity, Code\ndbl (2): Year, Renewables (TWh growth - equivalent)\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ndata_PCR <- read_csv(\"per-capita-renewables.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 4862 Columns: 4\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (2): Entity, Code\ndbl (2): Year, Renewables per capita (kWh - equivalent)\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_PCR_filt <- data_PCR %>%\n  filter(str_detect(string = Entity,\n           pattern = \"Brazil|World|Europe|South America|Africa|Asia|North America|Oceania\")) %>%\n  filter(str_detect(Entity,\"South Africa|European\",negate = TRUE))\n\n(\n  data_PCR_filt_text <- data_PCR_filt %>%\n  filter(Year == 2018) %>%\n  arrange(desc(`Renewables per capita (kWh - equivalent)`))\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 8 x 4\n  Entity        Code      Year `Renewables per capita (kWh - equivalent)`\n  <chr>         <chr>    <dbl>                                      <dbl>\n1 Brazil        BRA       2018                                      7493.\n2 North America <NA>      2018                                      5654.\n3 Europe        <NA>      2018                                      5452.\n4 Oceania       <NA>      2018                                      5435.\n5 South America <NA>      2018                                      5211.\n6 World         OWID_WRL  2018                                      2472.\n7 Asia          <NA>      2018                                      1648.\n8 Africa        <NA>      2018                                       343.\n```\n:::\n\n```{.r .cell-code}\n(p22_1 <- data_PCR_filt %>% \n  mutate(Entity = factor(Entity,levels = rev(data_PCR_filt_text$Entity))) %>%\n  ggplot(aes(x = Year,y = `Renewables per capita (kWh - equivalent)`,\n             fill = Entity)) +\n  geom_area(color = \"grey99\",alpha = .75) +\n  # geom_text(data = data_PCR_filt_text,\n  #           aes(x = 2022,\n  #               y=`Renewables per capita (kWh - equivalent)`,\n  #               label = Entity),show_guide = FALSE) +\n  scale_x_continuous(breaks = seq(1966,2022,4),\n                     limits = c(1966,2021),\n                     expand = c(0,0)) +\n  scale_y_continuous(breaks = seq(5000,40000,5000),\n                     expand = c(0,0)) +\n  scale_fill_manual(values = c(\"Africa\" = \"black\",\n                                \"Europe\" = \"navy\",\n                                \"Asia\" = \"#f9b549\",\n                                \"Oceania\" = \"darkgreen\",\n                                \"World\" = \"grey\",\n                                \"North America\" = \"firebrick4\",\n                                \"South America\" = \"firebrick1\",\n                                \"Brazil\" = \"#ffdf00\"))+\n  labs(title = \"\",\n       subtitle = \"Renewables per capita (kWh - equivalent)\",\n       y = \"\",\n       x = \"\",fill = \"\") +\n  theme(plot.title = element_text(family = \"Open Sans\",face = \"bold\"),\n        text = element_text(family = \"Open Sans\"),\n        panel.grid = element_blank(),\n        panel.background = element_rect(color = \"grey15\",\n                                        fill = \"grey95\")))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 8 rows containing non-finite values (`stat_align()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(p22_2 <- data_ACR %>%\n  filter(Entity == \"Brazil\") %>%\n  ggplot(aes(x = Year, y =`Renewables (TWh growth - equivalent)`)) +\n  geom_col(fill=\"#ffdf00\",col = \"#009c3b\")+\n  scale_x_continuous(breaks = seq(1966,2022,4),\n                     limits = c(1966,2022),\n                     expand = c(0,0)) +\n  scale_y_continuous(breaks = seq(-105,105,15)) +\n  labs(title = \"\",\n      subtitle = \"Brazil - Renewables (TWh growth - equivalent)\",\n      x = \"\",y = \"\") +\n  theme(plot.title = element_text(family = \"Open Sans\",face = \"bold\"),\n        text = element_text(family = \"Open Sans\"),\n        panel.grid = element_blank(),\n        panel.background = element_rect(color = \"grey15\",\n                                        fill = \"grey95\"))\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1 rows containing missing values (`geom_col()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(p22_final <- (p22_1 + p22_2) +\n   patchwork::plot_annotation(\n     title = \"Is Brazil the country of renewable energy?\",\n     subtitle = \"Source: Our World in Data\") +\n  patchwork::plot_layout(ncol = 2,guides = \"collect\") &\n   theme(legend.position = \"bottom\",\n         plot.title = element_text(size = 25,family = \"Open Sans\",face = \"bold\")))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 8 rows containing non-finite values (`stat_align()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1 rows containing missing values (`geom_col()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggdraw(p22_final) +\n  draw_image(image = \"brazil.png\",x = .95, y = .95, hjust = 1, vjust = 1, width = 0.075, height = 0.075)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 8 rows containing non-finite values (`stat_align()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 1 rows containing missing values (`geom_col()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(filename = \"day22_finalplot.png\",dpi = 600,width = 12)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSaving 12 x 5 in image\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}