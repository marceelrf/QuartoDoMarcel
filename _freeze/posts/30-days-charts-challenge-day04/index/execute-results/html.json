{
  "hash": "cb931f426cc106871df97e29e846b17e",
  "result": {
    "markdown": "---\ntitle: \"30 days chart challenge - day 04\"\ndescription: \"historical\"\nauthor: \"Marcel Ferreira\"\ndate: \"2023-04-04\"\ncategories: [R, Dataviz]\nimage: \"blue-81847_1920.jpg\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.0     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv ggplot2   3.4.1     v tibble    3.1.8\nv lubridate 1.9.2     v tidyr     1.3.0\nv purrr     1.0.1     \n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(extrafont)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRegistering fonts with R\n```\n:::\n:::\n\n\n## Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata <- read_csv(\"athlete_events.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 271116 Columns: 15\n-- Column specification --------------------------------------------------------\nDelimiter: \",\"\nchr (10): Name, Sex, Team, NOC, Games, Season, City, Sport, Event, Medal\ndbl  (5): ID, Age, Height, Weight, Year\n\ni Use `spec()` to retrieve the full column specification for this data.\ni Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(data)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 271,116\nColumns: 15\n$ ID     <dbl> 1, 2, 3, 4, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, ~\n$ Name   <chr> \"A Dijiang\", \"A Lamusi\", \"Gunnar Nielsen Aaby\", \"Edgar Lindenau~\n$ Sex    <chr> \"M\", \"M\", \"M\", \"M\", \"F\", \"F\", \"F\", \"F\", \"F\", \"F\", \"M\", \"M\", \"M\"~\n$ Age    <dbl> 24, 23, 24, 34, 21, 21, 25, 25, 27, 27, 31, 31, 31, 31, 33, 33,~\n$ Height <dbl> 180, 170, NA, NA, 185, 185, 185, 185, 185, 185, 188, 188, 188, ~\n$ Weight <dbl> 80, 60, NA, NA, 82, 82, 82, 82, 82, 82, 75, 75, 75, 75, 75, 75,~\n$ Team   <chr> \"China\", \"China\", \"Denmark\", \"Denmark/Sweden\", \"Netherlands\", \"~\n$ NOC    <chr> \"CHN\", \"CHN\", \"DEN\", \"DEN\", \"NED\", \"NED\", \"NED\", \"NED\", \"NED\", ~\n$ Games  <chr> \"1992 Summer\", \"2012 Summer\", \"1920 Summer\", \"1900 Summer\", \"19~\n$ Year   <dbl> 1992, 2012, 1920, 1900, 1988, 1988, 1992, 1992, 1994, 1994, 199~\n$ Season <chr> \"Summer\", \"Summer\", \"Summer\", \"Summer\", \"Winter\", \"Winter\", \"Wi~\n$ City   <chr> \"Barcelona\", \"London\", \"Antwerpen\", \"Paris\", \"Calgary\", \"Calgar~\n$ Sport  <chr> \"Basketball\", \"Judo\", \"Football\", \"Tug-Of-War\", \"Speed Skating\"~\n$ Event  <chr> \"Basketball Men's Basketball\", \"Judo Men's Extra-Lightweight\", ~\n$ Medal  <chr> NA, NA, NA, \"Gold\", NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,~\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n(\n  Brazil_summary <- data %>% \n    filter(Team == \"Brazil\") %>% filter(Season == \"Summer\") %>%\n    distinct(Season, Year, Event, Medal) %>%\n    select(Year,Medal) %>%\n    group_by(Year) %>%\n    count(Medal) %>%\n    pivot_wider(names_from = Medal,values_from = n,values_fill = 0) %>%\n    select(-\"NA\") %>%\n    pivot_longer(cols = -Year,\n                 names_to = \"Medal\",\n                 values_to = \"n\")\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 69 x 3\n# Groups:   Year [23]\n    Year Medal      n\n   <dbl> <chr>  <int>\n 1  1900 Bronze     0\n 2  1900 Gold       0\n 3  1900 Silver     0\n 4  1920 Bronze     1\n 5  1920 Gold       1\n 6  1920 Silver     1\n 7  1924 Bronze     0\n 8  1924 Gold       0\n 9  1924 Silver     0\n10  1932 Bronze     0\n# ... with 59 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#Data\nBrazil_summary %>%\n  mutate(Medal = factor(Medal,levels = c(\"Gold\",\"Silver\",\"Bronze\"))) %>%\n  #Aesthetics + Geometries\n  ggplot(aes(x = Year, y = n, col = Medal, group = Medal)) +\n  geom_point(size = 4) + \n  geom_line(size = 2) +\n  #Scales customizations\n  scale_x_continuous(breaks = seq(from = 1896,\n                                  to = 2016,\n                                  by = 8)) +\n  scale_y_continuous(breaks = 0:11) +\n  scale_color_manual(values = c(\"#FFD700\",\n                                \"#C0C0C0\",\n                                \"#cd7f32\")) + \n  #Annotations 1\n  annotate(geom = \"text\",\n           label = \"No athletes\\nin the first games\",\n           x = 1918,y = 6,\n           size = 9,\n           family = \"Berlin Sans FB\") +\n  annotate(geom = \"curve\",\n           x = 1905,xend = 1896,\n           y = 6, yend = .5,\n           arrow = arrow()) +\n  annotate(geom = \"rect\",\n           xmin = 2014,xmax = 2018,\n           ymin = 0,ymax = 9,\n           fill = \"green\",alpha = .2\n           ) +\n  annotate(geom = \"text\",\n           label = \"Rio\\n2016\",\n           x = 2016,y = 1.5,\n           family = \"Berlin Sans FB\",col = \"navy\",\n           size = 5) +\n  #Labels\n  labs(title = \"Brazil's medals in the Olympics (1896-2016)\",\n       subtitle = \"Source: https://www.kaggle.com/code/celiomatos/brazil-score-in-olympics/input?select=athlete_events.csv\",\n       y = \"Total of medals\") +\n  #Theme\n  theme(text = element_text(family = \"Berlin Sans FB\"),\n        plot.title = element_text(size = 26,hjust = .5,family = \"Berlin Sans FB\"),\n        plot.subtitle = element_text(size = 9,family = \"Berlin Sans FB\"),\n        panel.background = element_rect(fill = \"white\"),\n        axis.text =  element_text(size = 15),\n        axis.title =  element_text(size = 20))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\ni Please use `linewidth` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggsave(filename = \"plot_final_day04.png\",width = 12,dpi = 600,bg = \"white\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSaving 12 x 5 in image\n```\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}