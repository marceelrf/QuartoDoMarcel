{
  "hash": "94f123b53e86fc967749c4d1d1470b40",
  "result": {
    "markdown": "---\ntitle: \"30 days chart challenge - day 21\"\ndescription: \"down/upwards\"\nauthor: \"Marcel Ferreira\"\ndate: \"2023-04-21\"\ncategories: [R, Dataviz]\nimage: \"\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n-- Attaching core tidyverse packages ------------------------ tidyverse 2.0.0 --\nv dplyr     1.1.0     v readr     2.1.4\nv forcats   1.0.0     v stringr   1.5.0\nv ggplot2   3.4.1     v tibble    3.1.8\nv lubridate 1.9.2     v tidyr     1.3.0\nv purrr     1.0.1     \n-- Conflicts ------------------------------------------ tidyverse_conflicts() --\nx dplyr::filter() masks stats::filter()\nx dplyr::lag()    masks stats::lag()\ni Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggtext)\nlibrary(rvest)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'rvest'\n\nThe following object is masked from 'package:readr':\n\n    guess_encoding\n```\n:::\n:::\n\n\n## Data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <- \"https://en.wikipedia.org/wiki/2019_Campeonato_Brasileiro_S%C3%A9rie_A\"\n\n\n\n\nurl %>% \n  read_html() %>% \n  html_node(xpath = '//*[@id=\"mw-content-text\"]/div[1]/table[7]') %>% \n  html_table(fill = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 20 x 11\n     Pos Team              Pld     W     D     L    GF    GA GD      Pts Quali~1\n   <int> <chr>           <int> <int> <int> <int> <int> <int> <chr> <int> <chr>  \n 1     1 Flamengo (C)       38    28     6     4    86    37 +49      90 \"Quali~\n 2     2 Santos             38    22     8     8    60    33 +27      74 \"Quali~\n 3     3 Palmeiras          38    21    11     6    61    32 +29      74 \"Quali~\n 4     4 Grêmio             38    19     8    11    64    39 +25      65 \"Quali~\n 5     5 Athletico Para~    38    18    10    10    51    32 +19      64 \"Quali~\n 6     6 São Paulo          38    17    12     9    39    30 +9       63 \"Quali~\n 7     7 Internacional      38    16     9    13    44    39 +5       57 \"Quali~\n 8     8 Corinthians        38    14    14    10    42    34 +8       56 \"Quali~\n 9     9 Fortaleza          38    15     8    15    50    49 +1       53 \"Quali~\n10    10 Goiás              38    15     7    16    46    64 -18      52 \"Quali~\n11    11 Bahia              38    12    13    13    44    43 +1       49 \"Quali~\n12    12 Vasco da Gama      38    12    13    13    39    45 -6       49 \"Quali~\n13    13 Atlético Minei~    38    13     9    16    45    49 -4       48 \"Quali~\n14    14 Fluminense         38    12    10    16    38    46 -8       46 \"Quali~\n15    15 Botafogo           38    13     4    21    31    45 -14      43 \"\"     \n16    16 Ceará              38    10     9    19    36    41 -5       39 \"\"     \n17    17 Cruzeiro (R)       38     7    15    16    27    46 -19      36 \"Releg~\n18    18 CSA (R)            38     8     8    22    24    58 -34      32 \"Releg~\n19    19 Chapecoense (R)    38     7    11    20    31    52 -21      32 \"Releg~\n20    20 Avaí (R)           38     3    11    24    18    62 -44      20 \"Releg~\n# ... with abbreviated variable name 1: `Qualification or relegation`\n```\n:::\n\n```{.r .cell-code}\nfinal_table <- list()\ntindex <- c(2,2,3,4,4,5,5,\n            6,6,6,9,9,8,7,7,7,7)\n\nfor(i in 1:17){\n  j <- 2005 + i\n  url <- glue::glue(\"https://en.wikipedia.org/wiki/{j}_Campeonato_Brasileiro_S%C3%A9rie_A\")\n  p1 <- tindex[i]\n  \n  \n  final_table[[i]] <- url %>% \n    read_html() %>% \n    html_node(xpath = glue::glue('//*[@id=\"mw-content-text\"]/div[1]/table[{p1}]')) %>% \n    html_table(fill = TRUE)\n  \n  print(j)\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 2006\n[1] 2007\n[1] 2008\n[1] 2009\n[1] 2010\n[1] 2011\n[1] 2012\n[1] 2013\n[1] 2014\n[1] 2015\n[1] 2016\n[1] 2017\n[1] 2018\n[1] 2019\n[1] 2020\n[1] 2021\n[1] 2022\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfinal_table %>%\n  map(.f = \\(x) x %>% mutate(Team = str_replace(Team, \"\\\\(C\\\\)\",\"\"))) %>%\n  map(.f = \\(x) x %>% mutate(Team = str_replace(Team, \"\\\\(R\\\\)\",\"\"))) %>%\n  map(.f = \\(x) x %>% mutate(Team = str_replace(Team, \"\\\\[c\\\\]\",\"\"))) %>%\n  map(.f = \\(x) x %>% mutate(Team = str_replace_all(Team, \" \",\"_\"))) %>%\n  map(.f = \\(x) x %>% filter(Team == \"São Paulo\")) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[1]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[2]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[3]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[4]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[5]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <chr>,\n#   Qualification or relegation <chr>\n\n[[6]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[7]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[8]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <chr>,\n#   Qualification or relegation <chr>\n\n[[9]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[10]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[11]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <chr>,\n#   Qualification or relegation <chr>\n\n[[12]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[13]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[14]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[15]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[16]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n\n[[17]]\n# A tibble: 0 x 11\n# ... with 11 variables: Pos <int>, Team <chr>, Pld <int>, W <int>, D <int>,\n#   L <int>, GF <int>, GA <int>, GD <chr>, Pts <int>,\n#   Qualification or relegation <chr>\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}